import{a as X,b as Z,c as ee}from"./chunk-NME5OWLW.js";import{l as K}from"./chunk-OJYR24EB.js";import{a as q}from"./chunk-AY56TXUB.js";import{g as R,k as Y,u as J}from"./chunk-VMH4ILIM.js";import{a as Q,b as U}from"./chunk-6AWQUBPH.js";import{a as L,b as z}from"./chunk-VORQTW3B.js";import{a as H,c as N}from"./chunk-L2D7AHNW.js";import{a as W}from"./chunk-6QI4QBU5.js";import{k as j,p as G,t as P}from"./chunk-2T5SWUVG.js";import{$b as C,Ab as f,Bb as v,Cb as r,Db as o,Eb as h,Ib as B,Nb as $,Pb as c,Wa as a,Xa as k,Zb as d,_b as _,bc as E,cc as F,dc as V,ec as I,gc as M,ha as b,ic as A,mb as g,qa as T,ra as w,rb as p,sb as D,xb as m,zb as x}from"./chunk-NSU275EB.js";import{a as O,b as S}from"./chunk-ODN5LVDJ.js";var ie=i=>({"schedule-block-start":i});function oe(i,s){if(i&1&&(r(0,"th"),d(1),o()),i&2){let e=s.$implicit;a(),_(e)}}function ae(i,s){if(i&1&&(r(0,"div"),d(1),o()),i&2){let e=c(2).$implicit,t=c().$index,n=c();a(),E(" (",n.getBlockProperty(e,t,"program")," ",n.getBlockProperty(e,t,"yearLevel"),"-",n.getBlockProperty(e,t,"section"),") ")}}function re(i,s){if(i&1&&(r(0,"div"),d(1),o()),i&2){let e=c(2).$implicit,t=c().$index,n=c();a(),C(" ",n.getBlockProperty(e,t,"facultyName")," ")}}function le(i,s){if(i&1&&(r(0,"div"),d(1),o()),i&2){let e=c(2).$implicit,t=c().$index,n=c();a(),C(" ",n.getBlockProperty(e,t,"roomCode")," ")}}function ce(i,s){if(i&1&&(r(0,"div",7)(1,"div",8)(2,"span",9),d(3),h(4,"br"),d(5),o()(),g(6,ae,2,3,"div")(7,re,2,1,"div")(8,le,2,1,"div"),r(9,"div",10),d(10),o()()),i&2){let e=c().$implicit,t=c().$index,n=c();D("height",n.getScheduleBlockHeight(e,t),"px"),p("ngClass",n.getDayClass(e)),a(3),C(" ",n.getBlockProperty(e,t,"courseCode"),""),a(2),C(" ",n.getBlockProperty(e,t,"courseTitle")," "),a(),m(n.entity==="faculty"||n.entity==="room"?6:-1),a(),m(n.entity==="program"||n.entity==="room"?7:-1),a(),m(n.entity==="faculty"||n.entity==="program"?8:-1),a(2),_(n.getFormattedTime(e,t))}}function de(i,s){if(i&1&&(r(0,"td",5),g(1,ce,11,9,"div",6),o()),i&2){let e=s.$implicit,t=c().$index,n=c();p("ngClass",A(3,ie,n.isScheduleBlockStart(e,t)))("ngStyle",n.getScheduleBlockStyle(e,t)),a(),m(n.isScheduleBlockStart(e,t)?1:-1)}}function se(i,s){if(i&1&&(r(0,"tr")(1,"td",4),d(2),o(),f(3,de,2,5,"td",5,x),o()),i&2){let e=s.$implicit,t=c();a(2),_(e.time),a(),v(t.days)}}var te=(()=>{class i{scheduleData;entity;days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];timeSlots=[];scheduleBlocks=[];ngOnInit(){this.generateTimeSlots(),this.processScheduleData()}generateTimeSlots(){for(let l=420;l<=1260;l+=30){let u=this.formatMinutesTo12Hour(l);this.timeSlots.push({time:u,minutes:l})}}processScheduleData(){Array.isArray(this.scheduleData)&&this.scheduleData.length>0?this.scheduleData.forEach(e=>{let t=this.convertTimeToMinutes(e.start_time),n=this.convertTimeToMinutes(e.end_time),l=this.findTimeSlotIndex(t),u=Math.ceil((n-t)/30),y=(n-t)%30===0?u+1:u;this.scheduleBlocks.push({day:e.day,startSlot:l,duration:y,courseCode:e.course_details.course_code,courseTitle:e.course_details.course_title,roomCode:e.room_code,facultyName:e.faculty_name,program:e.program_code,yearLevel:e.year_level,section:e.section_name})}):console.warn("No schedules found or invalid data structure:",this.scheduleData)}convertTimeToMinutes(e){let[t,n]=e.split(":").map(Number);return t*60+n}findTimeSlotIndex(e){return this.timeSlots.findIndex(t=>t.minutes>=e)}isScheduleBlockStart(e,t){return this.scheduleBlocks.some(n=>n.day===e&&t===n.startSlot)}getScheduleBlockHeight(e,t){let n=this.getScheduleBlock(e,t);return n?n.duration*26-2:0}getScheduleBlockStyle(e,t){let n=this.getScheduleBlock(e,t);if(n){let{backgroundColor:l,borderColor:u}=this.getBlockColors(e),y={"background-color":l,"border-left":`1px solid ${u}`,"border-right":`1px solid ${u}`};return t===n.startSlot?S(O({},y),{"border-top":`1px solid ${u}`}):t===n.startSlot+n.duration-1?S(O({},y),{"border-bottom":`1px solid ${u}`}):y}return{}}getDayClass(e){return`schedule-${e.toLowerCase()}`}getBlockProperty(e,t,n){let l=this.getScheduleBlock(e,t);return l?l[n]:null}getFormattedTime(e,t){if(this.getScheduleBlock(e,t)){let l=this.scheduleData.find(u=>u.day===e&&this.convertTimeToMinutes(u.start_time)===this.timeSlots[t].minutes);if(l)return`${this.formatTimeTo12Hour(l.start_time)} - ${this.formatTimeTo12Hour(l.end_time)}`}return""}getBlockColors(e){return{Monday:{backgroundColor:"var(--primary-fade)",borderColor:"var(--primary-text)"},Tuesday:{backgroundColor:"var(--secondary-fade)",borderColor:"var(--secondary-text)"},Wednesday:{backgroundColor:"var(--blue-fade)",borderColor:"var(--blue-primary)"},Thursday:{backgroundColor:"var(--aqua-fade)",borderColor:"var(--aqua-primary)"},Friday:{backgroundColor:"var(--purple-fade)",borderColor:"var(--purple-primary)"},Saturday:{backgroundColor:"var(--green-fade)",borderColor:"var(--green-primary)"},Sunday:{backgroundColor:"var(--primary-fade)",borderColor:"var(--primary-text)"}}[e]}formatMinutesTo12Hour(e){let t=Math.floor(e/60),n=e%60,l=t>=12?"PM":"AM";return`${t%12||12}:${n.toString().padStart(2,"0")} ${l}`}formatTimeTo12Hour(e){let[t,n]=e.split(":").map(Number),l=t>=12?"PM":"AM";return t=t%12||12,`${t}:${n.toString().padStart(2,"0")} ${l}`}getScheduleBlock(e,t){return this.scheduleBlocks.find(n=>n.day===e&&t>=n.startSlot&&t<n.startSlot+n.duration)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["app-schedule-timeline"]],inputs:{scheduleData:"scheduleData",entity:"entity"},standalone:!0,features:[M],decls:10,vars:0,consts:[[1,"schedule-timeline-container"],[1,"schedule-timeline-table"],[1,"schedule-timeline-table-header"],[1,"schedule-timeline-table-body"],[1,"time-slot"],[1,"schedule-cell",3,"ngClass","ngStyle"],[1,"schedule-content",3,"height","ngClass"],[1,"schedule-content",3,"ngClass"],[1,"course"],[1,"course-text"],[1,"time"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),h(4,"th"),f(5,oe,2,1,"th",null,x),o()(),r(7,"tbody",3),f(8,se,5,1,"tr",null,x),o()()()),t&2&&(a(5),v(n.days),a(3),v(n.timeSlots))},dependencies:[P,j,G],styles:[".schedule-content.schedule-monday[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{color:var(--primary-text)}.schedule-content.schedule-monday[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background-color:var(--primary-text);color:var(--primary-text-two);padding:var(--spacing-xxs) var(--spacing-xs);border-radius:var(--border-radius-xl)}.schedule-content.schedule-tuesday[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{color:var(--secondary-text)}.schedule-content.schedule-tuesday[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background-color:var(--secondary-text);color:var(--secondary-text-two);padding:var(--spacing-xxs) var(--spacing-xs);border-radius:var(--border-radius-xl)}.schedule-content.schedule-wednesday[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{color:var(--blue-primary)}.schedule-content.schedule-wednesday[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background-color:var(--blue-primary);color:var(--blue-text);padding:var(--spacing-xxs) var(--spacing-xs);border-radius:var(--border-radius-xl)}.schedule-content.schedule-thursday[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{color:var(--aqua-primary)}.schedule-content.schedule-thursday[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background-color:var(--aqua-primary);color:var(--aqua-text);padding:var(--spacing-xxs) var(--spacing-xs);border-radius:var(--border-radius-xl)}.schedule-content.schedule-friday[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{color:var(--purple-primary)}.schedule-content.schedule-friday[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background-color:var(--purple-primary);color:var(--purple-text);padding:var(--spacing-xxs) var(--spacing-xs);border-radius:var(--border-radius-xl)}.schedule-content.schedule-saturday[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{color:var(--green-primary)}.schedule-content.schedule-saturday[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background-color:var(--green-primary);color:var(--green-text);padding:var(--spacing-xxs) var(--spacing-xs);border-radius:var(--border-radius-xl)}.schedule-content.schedule-sunday[_ngcontent-%COMP%]   .course[_ngcontent-%COMP%]{color:var(--primary-text)}.schedule-content.schedule-sunday[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{background-color:var(--primary-text);color:var(--primary-text);padding:var(--spacing-xxs) var(--spacing-xs);border-radius:var(--border-radius-xl)}.schedule-timeline-container[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none;height:100%;width:100%;overflow-y:auto;max-height:60vh;border-radius:var(--border-radius-md)}.schedule-timeline-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]{transition:background-color .3s ease;width:100%;border-collapse:separate;border-spacing:0;background-color:var(--neutral-space);position:relative}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;font-weight:500}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-header[_ngcontent-%COMP%]{position:sticky;top:0;bottom:0;background-color:var(--primary-one);z-index:2}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff;padding:var(--spacing-xs);border-right:1px solid var(--neutral-fade);border-bottom:1px solid var(--neutral-fade)}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0;border-bottom:1px solid var(--neutral-fade);border-right:1px solid var(--neutral-fade);min-width:5rem;max-width:5rem;height:1.5rem;position:relative}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   .time-slot[_ngcontent-%COMP%]{transition:background-color .3s ease;font-weight:500;border-right:1px solid var(--neutral-fade);background-color:var(--neutral-space);z-index:1;padding:var(--spacing-xxxs)}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   .schedule-cell[_ngcontent-%COMP%]{max-width:6rem;min-width:6rem;position:relative}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   .schedule-cell.schedule-block-start[_ngcontent-%COMP%]{border-bottom:none}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   .schedule-cell.schedule-block-start[_ngcontent-%COMP%] + .schedule-cell[_ngcontent-%COMP%]{border-top:none}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   .schedule-cell.schedule-block-start[_ngcontent-%COMP%]   .schedule-content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--spacing-md);white-space:pre-wrap;word-break:break-word;font-size:var(--font-size-sm);padding:0 var(--spacing-xs)}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   .schedule-cell.schedule-block-start[_ngcontent-%COMP%]   .schedule-content[_ngcontent-%COMP%]   .course-text[_ngcontent-%COMP%]{font-weight:600}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   .schedule-cell[style*=background-color][_ngcontent-%COMP%]{border-bottom:none;border-top:none}.schedule-timeline-container[_ngcontent-%COMP%]   .schedule-timeline-table[_ngcontent-%COMP%]   .schedule-timeline-table-body[_ngcontent-%COMP%]   .schedule-cell[style*=background-color][_ngcontent-%COMP%] + .schedule-cell[style*=background-color][_ngcontent-%COMP%]{border-left:none}"]})}return i})();function ue(i,s){i&1&&(r(0,"div",1),h(1,"app-loading"),o())}function me(i,s){if(i&1&&(r(0,"div",17)(1,"h3",18),d(2),o(),h(3,"app-schedule-timeline",19),o()),i&2){let e=s.$implicit,t=c(4);a(2),_(e.title),a(),p("scheduleData",e.scheduleData)("entity",t.data.entity)("@fadeAnimation",void 0)}}function ge(i,s){if(i&1&&(r(0,"div",15),f(1,me,4,4,"div",17,x),o()),i&2){let e=c(3);a(),v(e.scheduleGroups)}}function pe(i,s){if(i&1&&(r(0,"div",16),h(1,"app-schedule-timeline",19),o()),i&2){let e=c(3);a(),p("scheduleData",e.scheduleData)("entity",e.data.entity)("@fadeAnimation",void 0)}}function he(i,s){if(i&1&&g(0,ge,3,0,"div",15)(1,pe,2,3,"div",16),i&2){let e=c(2);m(e.scheduleGroups&&e.scheduleGroups.length>0?0:-1),a(),m(e.scheduleGroups?-1:1)}}function _e(i,s){i&1&&(r(0,"div",11)(1,"span"),d(2,"Display the PDF frame here"),o()())}function Ce(i,s){i&1&&(r(0,"button",14)(1,"mat-icon"),d(2,"print"),o(),d(3," Download PDF "),o())}function xe(i,s){if(i&1){let e=B();r(0,"div",2)(1,"div",3)(2,"h2",4),d(3),o(),r(4,"span",5),d(5),o()(),r(6,"div",6)(7,"mat-button-toggle-group",7),I("ngModelChange",function(n){T(e);let l=c();return V(l.selectedView,n)||(l.selectedView=n),w(n)}),r(8,"mat-button-toggle",8)(9,"mat-icon",9),d(10,"table_chart"),o(),r(11,"span"),d(12,"Table view"),o()(),r(13,"mat-button-toggle",10)(14,"mat-icon",9),d(15,"picture_as_pdf"),o(),r(16,"span"),d(17,"PDF view"),o()()()()(),g(18,he,2,2)(19,_e,3,0,"div",11),r(20,"div",12)(21,"button",13),$("click",function(){T(e);let n=c();return w(n.closeDialog())}),d(22," Close "),o(),g(23,Ce,4,0,"button",14),o()}if(i&2){let e=c();p("@fadeAnimation",void 0),a(3),_(e.title),a(2),C("Official Schedule ",e.subtitle,""),a(2),F("ngModel",e.selectedView),a(11),m(e.selectedView==="table-view"?18:e.selectedView==="pdf-view"?19:-1),a(2),p("@fadeAnimation",void 0),a(3),m(e.selectedView==="pdf-view"?23:-1)}}var Le=(()=>{class i{dialogRef;data;title="";subtitle="";isLoading=!0;scheduleData;scheduleGroups;selectedView="table-view";constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){this.initializeScheduleTitle(),this.data.scheduleGroups&&this.data.scheduleGroups.length>0?this.scheduleGroups=this.data.scheduleGroups:this.scheduleData=this.data.entityData,this.isLoading=!1}initializeScheduleTitle(){this.setTitleAndSubtitle()}setTitleAndSubtitle(){let{customTitle:e,entityData:t,academicYear:n,semester:l}=this.data;this.title=e??t?.name??t?.title??"Schedule",this.subtitle=n&&l?`For Academic Year ${n}, ${l}`:"",this.isLoading=!1}closeDialog(){this.dialogRef.close()}onViewChange(e){this.selectedView=e}static \u0275fac=function(t){return new(t||i)(k(L),k(z))};static \u0275cmp=b({type:i,selectors:[["app-dialog-view-schedule"]],standalone:!0,features:[M],decls:3,vars:1,consts:[[1,"dialog-view-schedule-container"],[1,"loading-wrapper"],[1,"entity-info"],[1,"schedule-title"],[1,"dialog-title"],[1,"dialog-subtitle"],[1,"view-option"],["name","viewOption","aria-label","Select view option",3,"ngModelChange","ngModel"],["value","table-view"],[1,"icon-spacing"],["value","pdf-view"],[1,"dialog-pref-pdf-container"],[1,"dialog-actions"],["mat-button","",1,"close-button",3,"click"],["mat-flat-button",""],[1,"multiple-schedules-container"],[1,"single-schedule-container"],[1,"schedule-group"],[1,"group-title"],[3,"scheduleData","entity"]],template:function(t,n){t&1&&(r(0,"div",0),g(1,ue,2,0,"div",1)(2,xe,24,7),o()),t&2&&(a(),m(n.isLoading?1:2))},dependencies:[P,J,R,Y,q,te,K,N,H,ee,X,Z,U,Q],styles:[".dialog-view-schedule-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;gap:var(--spacing-md);padding:var(--spacing-lg);height:100%}.entity-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:var(--spacing-xxs)}.entity-info[_ngcontent-%COMP%]   .schedule-title[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{margin:0;padding:0;border:0;box-sizing:border-box;font-weight:600;color:var(--primary-text)}.entity-info[_ngcontent-%COMP%]   .schedule-title[_ngcontent-%COMP%]   .dialog-subtitle[_ngcontent-%COMP%]{color:var(--primary-text)}.multiple-schedules-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;gap:var(--spacing-xl);max-height:var(--dialog-base-height);overflow:auto;padding-right:var(--spacing-md)}.multiple-schedules-container[_ngcontent-%COMP%]   .schedule-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;gap:var(--spacing-xs);border-radius:var(--border-radius-md)}.multiple-schedules-container[_ngcontent-%COMP%]   .schedule-group[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{margin:0;padding:0;border:0;box-sizing:border-box;font-weight:600}.single-schedule-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;gap:0;min-height:var(--dialog-base-height)}iframe[_ngcontent-%COMP%]{width:100%;max-height:var(--dialog-base-height);border:none;border-radius:var(--border-radius-md);box-shadow:var(--shadow-level-1)}.dialog-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:0}.dialog-actions[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{color:var(--primary-text)}"],data:{animation:[W]}})}return i})();export{Le as a};
