<!-- Table Heading -->
@if (showTableHeading) {
<div class="table-heading">
  <h2 class="heading-title">{{ tableHeadingTitle }}</h2>
  <button
    mat-button
    class="heading-button"
    (click)="onTableHeadingButtonClick()"
  >
    @if (tableHeadingButtonIcon) {
    <mat-icon>{{ tableHeadingButtonIcon }}</mat-icon>
    }
    {{ tableHeadingButtonText }}
  </button>
</div>
}

<div class="table-container">
  <!--Material Table-->
  <table mat-table [dataSource]="dataSource" matSort class="custom-table">
    <!-- Dynamic columns -->
    @for (column of columns; track column.key) {
    <ng-container [matColumnDef]="column.key">
      <th
        mat-header-cell
        *matHeaderCellDef
        mat-sort-header
        class="custom-header common"
        [ngClass]="{
          sticky: isHeaderSticky,
          'top-left-radius': isFirstColumn(column.key)
        }"
      >
        {{ column.label }}
      </th>
      <td mat-cell *matCellDef="let element; let i = index" class="custom-cell">
        @if (column.key === 'index') {
        {{ getIndex(i) }}
        } @else {
        {{ element[column.key] }}
        }
      </td>
    </ng-container>
    }

    <!-- Actions column -->
    <ng-container matColumnDef="action">
      <th
        mat-header-cell
        *matHeaderCellDef
        class="custom-header action"
        [ngClass]="{ sticky: isHeaderSticky }"
      >
        Actions
      </th>
      <td mat-cell *matCellDef="let element" class="custom-cell action-cell">
        <div class="action-buttons">
          <!-- Optionally shows 'View' button-->
          @if (showViewButton) {
          <button mat-button class="view-button" (click)="onView(element)">
            <mat-icon>visibility</mat-icon>
            <span>View</span>
          </button>
          }

          <!-- Edit Button-->
          <button mat-button class="edit-button" (click)="onEdit(element)">
            <mat-icon>edit</mat-icon>
            <span>Edit</span>
          </button>

          <!-- Delete Button-->
          <button mat-button class="delete-button" (click)="onDelete(element)">
            <mat-icon>delete</mat-icon>
            <span>Delete</span>
          </button>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <!--Table Paginator-->
  <div class="paginator-container">
    <mat-paginator
      class="custom-table-paginator"
      [length]="data.length"
      [pageSize]="25"
      [pageSizeOptions]="[5, 10, 25, 50]"
      [showFirstLastButtons]="showFirstLastButtons"
    ></mat-paginator>
  </div>
</div>
