<div class="scheduling-dialog-container">
  <!-- Section 1: Suggested Faculty -->
  <section class="section suggested-faculty">
    <div class="title">
      <h2 class="dialog-title suggested">
        <span mat-symbol="dynamic_form"></span> Suggested
      </h2>
      <span class="desc">*Based on submitted preferences</span>
    </div>

    <mat-dialog-content class="content faculty-list">
      <div *ngFor="let faculty of suggestedFaculty" class="faculty-item">
        <span class="faculty-name">{{ faculty.name }}</span>
        <span class="faculty-time">{{ faculty.day }}, {{ faculty.time }}</span>
      </div>
    </mat-dialog-content>
  </section>

  <!-- Section 2: Edit Schedule Details -->
  <section class="section edit-schedule-details">
    <div class="title">
      <h2 class="dialog-title scheduling">Edit Schedule Details</h2>
      <span class="program-info">{{ selectedProgramInfo }}</span>
      <span class="course-name">{{ selectedCourseInfo }}</span>
    </div>

    <mat-dialog-content class="content forms-list">
      <form [formGroup]="scheduleForm" class="scheduling-form-group">
        <!-- Day Field -->
        <mat-form-field class="scheduling-forms">
          <mat-label>Day</mat-label>
          <mat-icon
            matPrefix
            [ngClass]="{
              'invalid-icon':
                scheduleForm.get('day')?.invalid &&
                scheduleForm.get('day')?.touched
            }"
            >calendar_today</mat-icon
          >
          <mat-select formControlName="day" required>
            <mat-option *ngFor="let day of dayOptions" [value]="day">{{
              day
            }}</mat-option>
          </mat-select>
          <mat-error *ngIf="scheduleForm.get('day')?.hasError('required')">
            Day is required.
          </mat-error>
        </mat-form-field>

        <!-- Start and End Date Fields -->
        <div class="date-fields">
          <!-- Start Time Field -->
          <mat-form-field class="scheduling-forms">
            <mat-label>Start Time</mat-label>
            <mat-icon
              matPrefix
              [ngClass]="{
                'invalid-icon':
                  scheduleForm.get('startTime')?.invalid &&
                  scheduleForm.get('startTime')?.touched
              }"
              >access_time_filled</mat-icon
            >
            <mat-select formControlName="startTime" required>
              <mat-option *ngFor="let time of timeOptions" [value]="time">
                {{ time }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="scheduleForm.get('startTime')?.hasError('required')"
            >
              Start time is required.
            </mat-error>
          </mat-form-field>

          <!-- End Time Field -->
          <mat-form-field class="scheduling-forms">
            <mat-label>End Time</mat-label>
            <mat-icon
              matPrefix
              [ngClass]="{
                'invalid-icon':
                  scheduleForm.get('endTime')?.invalid &&
                  scheduleForm.get('endTime')?.touched
              }"
              >access_time_filled</mat-icon
            >
            <mat-select formControlName="endTime" required>
              <mat-option *ngFor="let time of endTimeOptions" [value]="time">
                {{ time }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="scheduleForm.get('endTime')?.hasError('required')"
            >
              End time is required.
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Professor Field -->
        <mat-form-field class="scheduling-forms">
          <mat-label>Professor</mat-label>
          <input
            type="text"
            matInput
            formControlName="professor"
            [matAutocomplete]="professorAuto"
          />
          <mat-autocomplete #professorAuto="matAutocomplete">
            <mat-option
              *ngFor="let professor of filteredProfessors | async"
              [value]="professor"
            >
              {{ professor }}
            </mat-option>
          </mat-autocomplete>
          <mat-error
            *ngIf="scheduleForm.get('professor')?.hasError('required')"
          >
            Professor is required.
          </mat-error>
        </mat-form-field>

        <!-- Room Field -->
        <mat-form-field class="scheduling-forms">
          <mat-label>Room</mat-label>
          <input
            type="text"
            matInput
            formControlName="room"
            [matAutocomplete]="roomAuto"
          />
          <mat-autocomplete #roomAuto="matAutocomplete">
            <mat-option
              *ngFor="let room of filteredRooms | async"
              [value]="room"
            >
              {{ room }}
            </mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="scheduleForm.get('room')?.hasError('required')">
            Room is required.
          </mat-error>
        </mat-form-field>
      </form>

      <!--Schedule Validator-->
      <div class="schedule-validator">
        <!-- No conflicts detected message -->
        <div *ngIf="!hasConflicts" class="validation-message no-conflict">
          <span mat-symbol="check_circle"></span>
          <span>All good! No scheduling conflicts have been detected.</span>
        </div>

        <!-- Conflicts detected message -->
        <div *ngIf="hasConflicts" class="validation-message conflict">
          <span mat-symbol="error"></span>
          <span>Warning: Scheduling conflicts have been detected.</span>
        </div>
      </div>
    </mat-dialog-content>

    <!-- Action Buttons -->
    <mat-dialog-actions class="scheduling-dialog-actions">
      <!-- New Clear All button -->
      <button mat-button class="clear-all-button" (click)="onClearAll()">
        <!-- <mat-icon>clear_all</mat-icon>  -->
        Clear All
      </button>

      <!-- Existing buttons (Cancel and Assign Schedule) -->
      <div class="action-buttons">
        <button class="cancel-button" mat-button (click)="onCancel()">
          Cancel
        </button>
        <button
          class="action-button"
          mat-flat-button
          [disabled]="!scheduleForm.valid || hasConflicts"
          (click)="onAssign()"
        >
          Assign Schedule
        </button>
      </div>
    </mat-dialog-actions>
  </section>
</div>
